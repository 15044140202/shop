<!-- 增加导航栏和容器阴影 -->
<import src="../../../../../template/SetMenu/SetMenu" />
<template is="titel_video" data="{{titelName:'订单退款',video_tap:'video_tap'}}" />
<view class="container">
  <!-- 表单区域增加卡片式设计 -->
  <view class="form-card">
    <!-- 单号输入增加标签说明 -->
    <view class="form-item">
      <text class="form-label">订单编号</text>
      <view class="input-group">
        <input 
          class="form-input"
          placeholder-style="color:#999;"
          placeholder="扫描或输入订单号"
          value="{{order}}"
          bindinput="inputOrder"
        />
        <van-icon 
          name="scan" 
          size="24px" 
          color="#1989fa"
          bind:tap="scan"
        />
      </view>
    </view>
 
    <!-- 金额输入增加单位提示 -->
    <view class="form-item">
      <text class="form-label">订单总额</text>
      <input 
        class="form-input money-input"
        type="number" 
        placeholder="请输入订单总金额"
        value="{{orderAmount}}"
        bindinput="inputOrderAmount"
      />
      <text class="unit">元</text>
    </view>
 
    <!-- 退款金额增加校验提示 -->
    <view class="form-item">
      <text class="form-label">退款金额</text>
      <input 
        class="form-input money-input {{isAmountInvalid ? 'error' : ''}}"
        type="number" 
        placeholder="最大可退{{tableCost}}元"
        value="{{amount}}"
        bindinput="inputAmount"
      />
      <text class="unit">元</text>
    </view>
    <text wx:if="{{isAmountInvalid}}" class="error-msg">金额不可超过订单总额</text>
  </view>
 
  <!-- 按钮增加动态效果 -->
  <button 
    class="submit-btn {{isFormValid ? 'active' : 'disabled'}}" 
    hover-class="btn-hover"
    bindtap="rePay"
  >
    立即退款 
  </button>
</view>
 
<van-dialog id="van-dialog" />