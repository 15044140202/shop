<!-- pages/satement/statement.wxml  -->
<!-- 头部操作区 -->
<view class="page-header">
  <view class="header-top">
      <picker class="shop-picker" bindchange="bindPickerChange" range="{{merchant_info.shopId}}" range-key="shopName" mark:item="shopSelect" value="{{shopName_seletNum}}">
        <view class="picker-content">
          <text class="shop-name">{{merchant_info.shopId[shopName_seletNum].shopName}}</text>
          <van-icon name="arrow-down" size="32rpx" color="rgba(255,255,255,0.8)" />
        </view>
      </picker>
      <picker class="date-picker" bindchange="bindPickerChange" mark:item="monthSearch" mode="date" fields="month">
        <van-icon name="search" size="44rpx" color="rgba(255,255,255,0.9)" />
      </picker>
    </view>
 
    <!-- 核心数据看板 -->
    <view class="revenue-card">
      <view class="nav-arrows">
        <van-icon name="arrow-left" size="56rpx" color="rgba(255,255,255,0.9)" bind:tap="tap" mark:item='left' />
      </view>
      <view class="revenue-main" bind:tap="goto" mark:item='查看营业额' mark:path="/pages/statement/turnover/turnover">
        <text class="revenue-amount">{{AccountsTotal}}</text>
        <view class="revenue-label">
          <text>{{disPlayDate === nowDate ? '今日营业额' : disPlayDate}}</text>
          <van-icon name="bar-chart-o" size="36rpx" color="#fff" />
        </view>
      </view>
      <view class="nav-arrows">
        <van-icon name="arrow" size="56rpx" color="rgba(255,255,255,0.9)" bind:tap="tap" mark:item='right' />
      </view>
    </view>
</view>
<view class="dashboard-container">
  <!-- 数据分类展示 -->
  <view class="data-modules">
    <!-- 支付方式模块 -->
    <view class="data-card">
      <view class="module-header">
        <view class="deco-line"></view>
        <text>按支付渠道统计</text>
      </view>
      <view class="payment-grid">
        <view wx:for="{{cash_data}}" wx:key="index" class="payment-item" bind:tap="goto" mark:path="{{item.url}}" mark:item='按收款方式查询'>
          <view class="payment-value">
            <text>{{item.sum}}</text>
            <text class="unit">元</text>
          </view> 
          <text class="payment-label">{{item.name}}</text>
        </view>
      </view>
      <view class="total-row">
        <text>合计：</text>
        <text class="highlight">{{cash_data[0].sum + cash_data[1].sum}}元</text>
      </view>
    </view>

    <!-- 卡券模块  按项目统计 -->
    <view class="data-card">
      <view class="module-header">
        <view style="display: flex; justify-content: right;">
          <view class="deco-line"></view>
          <text>{{data_card?'按项目统计' :'卡券使用统计'}}</text>
        </view>
        <view style="display: flex;flex-direction: row; align-items: center;" bind:tap="tap" mark:item="data_card_change">
          <text style="font-size: 25rpx; color: #ccc;">{{data_card?'至按卡券统计' :'至按项目统计'}}</text>
          <van-icon name="exchange" size="45rpx"></van-icon>
        </view>
      </view>
      <view class="card-grid" wx:if="{{data_card}}">
        <view wx:for="{{item_data}}" wx:key="index" class="card-item" bind:tap="goto" mark:path='{{item.url}}' mark:item="按收入项目查询"> 
          <view style="display: flex; flex-direction: row; justify-content: space-between;">
            <view style=" width: 220rpx;">
              <text class="card-label">{{item.name}} : </text>
            </view>
            <view>
              <text class="card-value">{{item.sum}}</text>
              <text class="unit">{{item.yuan}}</text>
            </view>
          </view>
          <view class="card-progress"></view>
        </view>
      </view>
      <view class="card-grid" wx:if="{{!data_card}}">
        <view wx:for="{{card_data}}" wx:key="index" class="card-item" bind:tap="goto" mark:path="{{item.url}}" mark:item="按收款方式查询">
          <view style="display: flex; flex-direction: row; justify-content: space-between;">
            <view style=" width: 220rpx;">
              <text class="card-label">{{item.name}} : </text>
            </view>
            <view>
              <text class="card-value">{{item.sum}}</text>
              <text class="unit">元</text>
            </view>
          </view>
          <view class="card-progress"></view>
        </view>
      </view>
    </view> 

    <!-- 智能简报模块 -->
    <view class="report-container">
      <view class="data-card" wx:for="{{sattement_data}}" wx:key="index" bind:tap="goto" mark:path="{{item.path}}" mark:item="{{item.name}}">
        <view class="report-header">
          <text>{{item.name}}</text>
          <van-icon name="warning-o" size="36rpx" color="{{index==7||index==16?'#FF4D4D':'#0097ff'}}" />
        </view>
        <view class="report-value">
          <text style="color:{{index==7||index==16?'#FF4D4D':'#333'}}; {{item.name === '开灯记录' ? 'font-size:32rpx;' : ''}}">{{item.sum}}</text>
          <text class="unit">{{item.yuan}}</text>
        </view>
      </view>
    </view>
  </view>
</view>