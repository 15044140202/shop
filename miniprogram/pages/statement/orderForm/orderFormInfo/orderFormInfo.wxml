<!--pages/operate/inShopCustomer/orderFormInfo/orderFormInfo.wxml-->
<view class="border">
  <view class="titel">
    <text style="font-size: 38rpx; padding-left: 30rpx;">{{orderForm[index].tableNum ?orderForm[index].tableNum + '号台' : ''}}</text>
    <text style=" padding-right:30rpx ">{{orderForm[index].orderName}}</text>
  </view>
  <!-- 订单编号 -->
  <view class="info">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">订单编号: </text>
    <text user-select="true" style=" padding-right:30rpx ">{{orderForm[index].orderNum}}</text>
  </view>
  <!-- 美团抖音快手 验券码 -->
  <view class="info" wx:if="{{orderForm[index].groupBuyType}}">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">{{orderForm[index].groupBuyType === 'mtCoupon'?'美团券码':orderForm[index].groupBuyType === 'dyCoupon'?'抖音券码':'快手券码'}}: </text>
    <text user-select="true" style=" padding-right:30rpx ">{{orderForm[index].groupBuyCode}}</text>
  </view>
  <view class="info">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">{{orderForm[index].orderName === '储值单' ||orderForm[index].orderName === '精彩秀单' ||orderForm[index].orderName === '商品单' || orderForm[index].orderName === '杆柜租赁' ? '时间: ' : '开始时间: '}}</text>
    <text style=" padding-right:30rpx ">{{orderForm[index].orderName === '储值单' ||orderForm[index].orderName === '精彩秀单' ||orderForm[index].orderName === '商品单' || orderForm[index].orderName === '杆柜租赁' ? orderForm[index].time : orderForm[index].time}}</text>
  </view>
  <view class="info" hidden="{{orderForm[index].orderName === '储值单' ||orderForm[index].orderName === '精彩秀单' ||orderForm[index].orderName === '商品单' || orderForm[index].orderName === '杆柜租赁'}}">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">结束时间: </text>
    <text style=" padding-right:30rpx ">{{orderForm[index].endTime}}</text>
  </view>
  <!-- 结账方式 -->
  <view class="info">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">{{orderForm[index].orderName === '储值单'  ||orderForm[index].orderName === '精彩秀单' ||orderForm[index].orderName === '商品单'  || orderForm[index].orderName === '杆柜租赁' ? '支付方式: ' : '结账方式: '}}</text>
    <text style=" padding-right:30rpx ">{{orderForm[index].payMode === 'wx' ? '微信' :orderForm[index].payMode === 'cash' ? '现金' : orderForm[index].payMode}}</text>
  </view>
  <!-- 支付状态 -->
  <view class="info" wx:if="{{orderForm[index].orderName === '商品单'}}">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">{{'支付状态: '}}</text>
    <text style=" padding-right:30rpx ">{{orderForm[index].payState === 0 ? '未支付' :orderForm[index].payState === 1 ? '已支付' :orderForm[index].payState === 2 ? '已取消' : '已退款'}}</text>
  </view>
  <!-- 开台/支付人 -->
  <view class="info" bind:tap="goto" mark:item="vipDetail">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">{{orderForm[index].orderName === '储值单'  ||orderForm[index].orderName === '精彩秀单'  ||orderForm[index].orderName === '商品单'  || orderForm[index].orderName === '杆柜租赁' ? '支付人: ' : '开台人: '}}</text>
    <text style=" padding-right:30rpx ">{{orderForm[index].orderName === '储值单' ? orderForm[index].userName: orderForm[index].orderName === '精彩秀单' ? orderForm[index].userName: orderForm[index].orderName === '商品单' || orderForm[index].orderName === '杆柜租赁'? orderForm[index].buyPerson.name : orderForm[index].userName}}</text>
  </view>
  <!-- 电话号 -->
  <view class="info" bind:tap="call">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">电话:{{orderForm[index].userTelephone}} </text>
    <view>
      <van-icon name="phone-o" size="45rpx"></van-icon>
      <text style=" padding-right:30rpx ">{{orderForm[index].orderName === '储值单' ? orderForm[index].person.telephone:orderForm[index].orderName === '精彩秀单' ? orderForm[index].personTelephone : orderForm[index].orderName === '商品单'  || orderForm[index].orderName === '杆柜租赁' ? orderForm[index].buyPerson.telephone : orderForm[index].openPerson.openPersonPhone}}</text>
    </view>
  </view>
  <view class="info" hidden="{{orderForm[index].orderName === '精彩秀单'  || orderForm[index].orderName === '杆柜租赁' || orderForm[index].orderName === '助教订单'}}">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">本次积分: </text>
    <text style=" padding-right:30rpx ">{{orderForm[index].integral}} 分</text>
  </view>
  <view style=" height: 30rpx; border-bottom: 1rpx #999 solid;"></view>
  <view class="info" hidden="{{orderForm[index].orderName === '储值单' || orderForm[index].orderName === '精彩秀单'|| orderForm[index].orderName === '商品单'  || orderForm[index].orderName === '杆柜租赁'|| orderForm[index].orderName === '助教订单'}}">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">桌台费: </text>
    <text style=" padding-right:30rpx ">{{orderForm[index].tableCost}} 元</text>
  </view>
  <!-- 商品列表 -->
  <view class="info" wx:for="{{orderForm[index].goodsList}}" wx:key="index">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">{{item.name}}</text>
    <text style=" padding-right:30rpx ">单价 : {{item.price / 100}}元 X {{item.sum}}</text>
  </view>
  <!-- 商品费 -->
  <view class="info" hidden="{{orderForm[index].orderName === '储值单' || orderForm[index].orderName === '精彩秀单'  || orderForm[index].orderName === '杆柜租赁' || orderForm[index].orderName === '助教订单'}}">
    <text style="font-size: 32rpx; padding-left: 30rpx; color: #999;">商品费: </text>
    <text style=" padding-right:30rpx ">{{orderForm[index].commotidyCost}} 元</text>
  </view>

  <view style=" height: 30rpx; border-bottom: 1rpx #999 solid;"></view>
  <view class="info" style="margin-bottom: 30rpx; margin-top: 30rpx;">
    <text style="font-size: 38rpx; padding-left: 30rpx; color: #999;">消费总额: </text>
    <text style=" padding-right:30rpx; font-size: 38rpx;">{{orderForm[index].orderName === '储值单' ? orderForm[index].amount: orderForm[index].orderName === '精彩秀单' ? orderForm[index].amount : orderForm[index].orderName === '商品单' ? orderForm[index].commotidyCost:orderForm[index].orderName === '杆柜租赁' ? orderForm[index].amount :orderForm[index].orderName === '助教订单' ? orderForm[index].amount / 100 : orderForm[index].commotidyCost + orderForm[index].tableCost}} 元</text>
  </view>
  <view class="info" style="margin-bottom: 10rpx; margin-top: 10rpx;" hidden="{{!(orderForm[index].payMode === '微信' || orderForm[index].payMode === 'wx' || orderForm[index].payMode ==='现金' || orderForm[index].payMode ==='cash')}}">
    <text style="font-size: 28rpx; padding-left: 30rpx; color: #999;">仅现金与微信结账方式的桌台订单支持退款</text>
    <!-- 商品单 退货 -->
    <button type="warn" size="mini" bind:tap="rePay_miniMall" mark:index='{{index}}' wx:if="{{orderForm[index].orderName === '商品单' && orderForm[index].payState === 1}}">退货</button>
    <!-- 其他订单退款 -->
    <button wx:else type="warn" size="mini" bind:tap="rePay" mark:index='{{index}}' disabled="{{refundTotalAmount >= orderForm[index].tableCost || orderForm[index].tableCost === 0 ||orderForm[index].orderName === '储值单' || orderForm[index].orderName === '商品单'}}">退款</button>
  </view>
</view>
<view style="margin-left: 30rpx; margin-top: 20rpx;" wx:if="{{orderForm[index].log}}">日志:</view>
<view class="border" style="margin-top: 20rpx;">
  <view wx:for="{{orderForm[index].log}}" wx:key="index" class="log">
    <text style="margin-left: 30rpx; ">{{item}}</text>
  </view>
</view>